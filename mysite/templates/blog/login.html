{% extends 'index.html' %}

{% block title%}
    用户登录
{% endblock%}

{% block content_title%}
    用户登录
{% endblock %}
{% block content %}
    <div class="">
        <div class="row">
            <div class="col-md-8 col-md-offset-3" style="color: red;font-weight: bolder">
                {{msg}}
            </div>
        </div>
        <form class="form-horizontal"  action="{% url 'blog:login' %}" method="post">
          <div class="form-group row">
            <label for="username" class="col-md-2 col-md-offset-1 control-label">用户名称：</label>
            <div class="col-md-8">
              <input type="text" class="form-control" name="username" id="username" placeholder="请输入您的用户名称">
            </div>
          </div>
        {% csrf_token %}
          <div class="form-group row">
            <label for="password" class="col-md-2 col-md-offset-1 control-label">用户密码：</label>
            <div class="col-md-8">
              <input type="password" class="form-control" name="password" id="password" placeholder="请输入您的用户密码">
            </div>
          </div>



           <div class="form-group row">
            <label for="password" class="col-md-2 col-md-offset-1 control-label">
                验证码：
            </label>
            <div class="col-md-4">
              <input type="text" class="form-control" name="code"  placeholder="请输入验证码">
            </div>
            <div class="col-md-5">
                <img id="mycode" src="{% url 'blog:code'%}" alt="验证码" title="点击刷新" style="cursor:pointer;" onclick="loadImg();">
            </div>
          </div>

          <div class="form-group row">
            <div class="col-md-2 col-md-offset-5">
              <button type="submit" class="btn btn-danger">用户登录</button>
            </div>
          </div>
        </form>

    </div>

    <script>
        $(function () {
            $("#mycode").on("click",function () {
               loadImg
            });
        });

        function loadImg() {
            $("#mycode").attr("src", "/blog/code/?id="+ new Date().getTime())
        }
    </script>
{% endblock %}